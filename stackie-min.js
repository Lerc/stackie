var Stackie=(()=>{function d(N=256,O=N){var P=new Float32Array(N*O),R=(V,W,X)=>P[W*N+V]=X,U=this;U.get=(V,W)=>P[W*N+V],U.set=R,U.getImageData=(V=I("x"))=>{var W=new ImageData(N,O),X=new Uint32Array(W.data.buffer);return P.forEach((Y,Z)=>X[Z]=V(Y)),W},U.generate=V=>{for(var W=0,X=0;X<O;W=W+1<N?W+1:0,X+=W?0:1)R(W,X,V(W/N,X/O))}}var k,o,z,e={},j=1<<30,l="tuvxyz",n=Math,A=N=>{var O=N&j-1,P=173;return()=>{return P=36969*(65535&P)+(P>>16),O=18000*(65535&O)+(O>>16),((P<<16)+O&j-1)/j}},B=N=>{k=A(N);var O=256,P=new Float32Array(2*(O*O)).map(k);o=P.map(Q=>n.sin(2*(Q*n.PI))),z=P.map(Q=>n.cos(2*(Q*n.PI)))};B(42);var C=(N,O=0,P=1,Q=N*N*N*(N*(6*N-15)+10))=>(1-Q)*O+Q*P,D=(N,O,P=N%O)=>0>P?O-P:P,E=()=>{var N,O=Y=>N.push(Y),P=()=>N.pop(),Q=(Y,Z)=>()=>O(Z.apply(null,N.splice(-Y,Y))),R=Y=>()=>{var Z=P();O(Y(P(),Z))},S=Y=>()=>O(Y(P())),T=Y=>()=>O(Y),U=Y=>()=>O(N[Y]),V={"*":R((Y,Z)=>Y*Z),"/":R((Y,Z)=>Y/Z),"-":R((Y,Z)=>Y-Z),"+":R((Y,Z)=>Y+Z),p:R(J),w:Q(3,K),W:Q(4,K),e:Q(1,C),E:Q(3,C),s:S(n.sin),c:S(n.cos),q:S(n.sqrt),a:R(n.atan2),r:Q(0,k),"<":R(n.min),">":R(n.max),l:S(n.log),"^":R(n.pow),P:T(n.PI),"~":S(n.abs),"#":S(n.round),$:S(n.floor),"%":Q(2,D),"!":S(Y=>1-Y),"?":S(Y=>0>=Y?0:1),":":()=>{var Y=P(),Z=P();O(Y),O(Z)},";":()=>{var Y=P(),Z=P(),$=P();O(Y),O(Z),O($)},d:()=>{var Y=P();O(Y),O(Y)}};for(var W in l)V[l[W]]=U(l[W]);for(var X=0;10>X;X++)V[""+X]=T(X);return(Y,Z)=>{N=Y,V[Z]()}},F=N=>{var O=E();return(P,Q,R)=>{var S=[];S.x=P,S.y=Q,S.t=R;for(var T of N)O(S,T);return S.pop()}},G=N=>0>N?0:1<N?1:N,H=N=>n.floor(255*G(N)),I=N=>{for(var O=F(N),P=[],Q=0;256>Q;Q++){var R=H(O(Q/256,0)),S=H(O(Q/256,0.5)),T=H(O(Q/256,1));P.push(255<<24|T<<16|S<<8|R)}return U=>P[H(U)]},J=(N,O,P=256,Q=P)=>{var R=(Y,Z,$=2*(D(Z,Q)*P+D(Y,P)))=>(N-Y)*o[$]+(O-Z)*z[$],S=n.floor(N),T=n.floor(O),U=N-S,W=S+1,X=T+1;return C(O-T,C(U,R(S,T),R(W,T)),C(U,R(S,X),R(W,X)))},K=(N,O,P=2,Q=P)=>J(N*P,O*Q,P,Q);return e.makeField=(N,O)=>new d(N,O),e.program=F,e.makeRandom=A,e.setSeed=B,e.makePaletteMapper=I,e.generate=(N,O,P=256)=>{var Q=new d(P),R=I(O||"x");return Q.generate(F(N)),Q.getImageData(R)},e})();